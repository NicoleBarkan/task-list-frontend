<div class="user-list-wrapper">
  <div class="user-list-header">
    <h2>{{ 'USER_LIST.TITLE' | translate }}</h2>
  </div>

  <div class="user-list-content">
    @for (user of users(); track user.id) {
      <mat-card>
        <mat-card-header>
          <div class="user-avatar">{{ user.username.charAt(0).toUpperCase() }}</div>
          <div class="user-info">
            <div class="user-name">{{ user.firstName }} {{ user.lastName }}</div>
            <div class="user-username">{{ '@' + user.username }}</div>
          </div>
        </mat-card-header>

        <div class="user-assign-row">
          <mat-form-field appearance="outline" class="group-select">
            <mat-label>{{ 'USER_LIST.CHANGE_GROUP' | translate }}</mat-label>
            <mat-select
              [value]="user.groupId"
              (selectionChange)="changeGroup(user, $event.value)"
              [disabled]="saving()[user.id] || loading()">
              @for (g of groups(); track g.id) {
                <mat-option [value]="g.id">{{ g.title }}</mat-option>
              }
            </mat-select>
          </mat-form-field>
        </div>

        <mat-card-actions>
          <button mat-stroked-button color="primary" [routerLink]="['/users', user.id]">
            {{ 'USER_LIST.VIEW_DETAILS' | translate }}
          </button>
        </mat-card-actions>
      </mat-card>
    }
  </div>
</div>
