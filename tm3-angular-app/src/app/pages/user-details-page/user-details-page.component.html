<div class="user-details-wrapper">
  @if (user; as u) {
    <mat-card class="user-card">
      <mat-card-header>
        <mat-card-title>{{ u.firstName }} {{ u.lastName }}</mat-card-title>
        <mat-card-subtitle>{{ u.username }}</mat-card-subtitle>
      </mat-card-header>

      <mat-card-content>
        <section class="section">
          <h3>Roles</h3>
          @for (role of roleOptions; track role.name) {
            <mat-checkbox
              [(ngModel)]="role.checked"
              [disabled]="role.disabled"
            >
              {{ role.label }}
            </mat-checkbox>
          }
        </section>
      </mat-card-content>

      <mat-card-actions>
        <button mat-stroked-button color="primary" routerLink="/users">← Back to List</button>
        <button mat-flat-button color="accent" (click)="saveRole()">Save</button>
      </mat-card-actions>
    </mat-card>
  } @else {
    <mat-card class="user-card">
      <mat-card-content>
        <p>⚠️ User not found.</p>
        <mat-card-actions>
          <button mat-stroked-button color="primary" routerLink="/users">← Back to List</button>
        </mat-card-actions>
      </mat-card-content>
    </mat-card>
  }
</div>
